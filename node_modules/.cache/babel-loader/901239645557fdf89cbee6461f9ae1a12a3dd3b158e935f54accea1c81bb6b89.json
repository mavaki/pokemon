{"ast":null,"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\nvar _reduce = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/reduce\"));\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/promise\"));\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"));\nvar _LocalDatastoreUtils = require(\"./LocalDatastoreUtils\");\nvar _Storage = _interopRequireDefault(require(\"./Storage\"));\nconst LocalDatastoreController = {\n  async fromPinWithName(name) {\n    const values = await _Storage.default.getItemAsync(name);\n    if (!values) {\n      return [];\n    }\n    const objects = JSON.parse(values);\n    return objects;\n  },\n  pinWithName(name, value) {\n    const values = (0, _stringify.default)(value);\n    return _Storage.default.setItemAsync(name, values);\n  },\n  unPinWithName(name) {\n    return _Storage.default.removeItemAsync(name);\n  },\n  async getAllContents() {\n    const keys = await _Storage.default.getAllKeysAsync();\n    return (0, _reduce.default)(keys).call(keys, async (previousPromise, key) => {\n      const LDS = await previousPromise;\n      if ((0, _LocalDatastoreUtils.isLocalDatastoreKey)(key)) {\n        const value = await _Storage.default.getItemAsync(key);\n        try {\n          LDS[key] = JSON.parse(value);\n        } catch (error) {\n          console.error('Error getAllContents: ', error);\n        }\n      }\n      return LDS;\n    }, _promise.default.resolve({}));\n  },\n  // Used for testing\n  async getRawStorage() {\n    const keys = await _Storage.default.getAllKeysAsync();\n    return (0, _reduce.default)(keys).call(keys, async (previousPromise, key) => {\n      const LDS = await previousPromise;\n      const value = await _Storage.default.getItemAsync(key);\n      LDS[key] = value;\n      return LDS;\n    }, _promise.default.resolve({}));\n  },\n  async clear() {\n    const keys = await _Storage.default.getAllKeysAsync();\n    const toRemove = [];\n    for (const key of keys) {\n      if ((0, _LocalDatastoreUtils.isLocalDatastoreKey)(key)) {\n        toRemove.push(key);\n      }\n    }\n    const promises = (0, _map.default)(toRemove).call(toRemove, this.unPinWithName);\n    return _promise.default.all(promises);\n  }\n};\nmodule.exports = LocalDatastoreController;\nvar _default = exports.default = LocalDatastoreController;","map":{"version":3,"names":["_Object$defineProperty","require","_interopRequireDefault","exports","value","default","_stringify","_reduce","_promise","_map","_LocalDatastoreUtils","_Storage","LocalDatastoreController","fromPinWithName","name","values","getItemAsync","objects","JSON","parse","pinWithName","setItemAsync","unPinWithName","removeItemAsync","getAllContents","keys","getAllKeysAsync","call","previousPromise","key","LDS","isLocalDatastoreKey","error","console","resolve","getRawStorage","clear","toRemove","push","promises","all","module","_default"],"sources":["/home/mavrik/Documents/classes/web-dev/feature05/node_modules/parse/lib/browser/LocalDatastoreController.default.js"],"sourcesContent":["\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\nvar _reduce = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/reduce\"));\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/promise\"));\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"));\nvar _LocalDatastoreUtils = require(\"./LocalDatastoreUtils\");\nvar _Storage = _interopRequireDefault(require(\"./Storage\"));\nconst LocalDatastoreController = {\n  async fromPinWithName(name) {\n    const values = await _Storage.default.getItemAsync(name);\n    if (!values) {\n      return [];\n    }\n    const objects = JSON.parse(values);\n    return objects;\n  },\n  pinWithName(name, value) {\n    const values = (0, _stringify.default)(value);\n    return _Storage.default.setItemAsync(name, values);\n  },\n  unPinWithName(name) {\n    return _Storage.default.removeItemAsync(name);\n  },\n  async getAllContents() {\n    const keys = await _Storage.default.getAllKeysAsync();\n    return (0, _reduce.default)(keys).call(keys, async (previousPromise, key) => {\n      const LDS = await previousPromise;\n      if ((0, _LocalDatastoreUtils.isLocalDatastoreKey)(key)) {\n        const value = await _Storage.default.getItemAsync(key);\n        try {\n          LDS[key] = JSON.parse(value);\n        } catch (error) {\n          console.error('Error getAllContents: ', error);\n        }\n      }\n      return LDS;\n    }, _promise.default.resolve({}));\n  },\n  // Used for testing\n  async getRawStorage() {\n    const keys = await _Storage.default.getAllKeysAsync();\n    return (0, _reduce.default)(keys).call(keys, async (previousPromise, key) => {\n      const LDS = await previousPromise;\n      const value = await _Storage.default.getItemAsync(key);\n      LDS[key] = value;\n      return LDS;\n    }, _promise.default.resolve({}));\n  },\n  async clear() {\n    const keys = await _Storage.default.getAllKeysAsync();\n    const toRemove = [];\n    for (const key of keys) {\n      if ((0, _LocalDatastoreUtils.isLocalDatastoreKey)(key)) {\n        toRemove.push(key);\n      }\n    }\n    const promises = (0, _map.default)(toRemove).call(toRemove, this.unPinWithName);\n    return _promise.default.all(promises);\n  }\n};\nmodule.exports = LocalDatastoreController;\nvar _default = exports.default = LocalDatastoreController;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}