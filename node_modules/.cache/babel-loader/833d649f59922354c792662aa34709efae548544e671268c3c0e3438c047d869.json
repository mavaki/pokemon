{"ast":null,"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = unsavedChildren;\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\nvar _indexOf = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/index-of\"));\nvar _isArray = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/array/is-array\"));\nvar _forEach = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"));\nvar _CoreManager = _interopRequireDefault(require(\"./CoreManager\"));\nvar _ParseFile = _interopRequireDefault(require(\"./ParseFile\"));\nvar _ParseRelation = _interopRequireDefault(require(\"./ParseRelation\"));\n/**\n * Return an array of unsaved children, which are either Parse Objects or Files.\n * If it encounters any dirty Objects without Ids, it will throw an exception.\n *\n * @param {Parse.Object} obj\n * @param {boolean} allowDeepUnsaved\n * @returns {Array}\n */\nfunction unsavedChildren(obj, allowDeepUnsaved) {\n  const encountered = {\n    objects: {},\n    files: []\n  };\n  const identifier = obj.className + ':' + obj._getId();\n  encountered.objects[identifier] = obj.dirty() ? obj : true;\n  const attributes = obj.attributes;\n  for (const attr in attributes) {\n    if (typeof attributes[attr] === 'object') {\n      traverse(attributes[attr], encountered, false, !!allowDeepUnsaved);\n    }\n  }\n  const unsaved = [];\n  for (const id in encountered.objects) {\n    if (id !== identifier && encountered.objects[id] !== true) {\n      unsaved.push(encountered.objects[id]);\n    }\n  }\n  return (0, _concat.default)(unsaved).call(unsaved, encountered.files);\n}\nfunction traverse(obj, encountered, shouldThrow, allowDeepUnsaved) {\n  const ParseObject = _CoreManager.default.getParseObject();\n  if (obj instanceof ParseObject) {\n    if (!obj.id && shouldThrow) {\n      throw new Error('Cannot create a pointer to an unsaved Object.');\n    }\n    const identifier = obj.className + ':' + obj._getId();\n    if (!encountered.objects[identifier]) {\n      encountered.objects[identifier] = obj.dirty() ? obj : true;\n      const attributes = obj.attributes;\n      for (const attr in attributes) {\n        if (typeof attributes[attr] === 'object') {\n          traverse(attributes[attr], encountered, !allowDeepUnsaved, allowDeepUnsaved);\n        }\n      }\n    }\n    return;\n  }\n  if (obj instanceof _ParseFile.default) {\n    var _context;\n    if (!obj.url() && (0, _indexOf.default)(_context = encountered.files).call(_context, obj) < 0) {\n      encountered.files.push(obj);\n    }\n    return;\n  }\n  if (obj instanceof _ParseRelation.default) {\n    return;\n  }\n  if ((0, _isArray.default)(obj)) {\n    (0, _forEach.default)(obj).call(obj, el => {\n      if (typeof el === 'object') {\n        traverse(el, encountered, shouldThrow, allowDeepUnsaved);\n      }\n    });\n  }\n  for (const k in obj) {\n    if (typeof obj[k] === 'object') {\n      traverse(obj[k], encountered, shouldThrow, allowDeepUnsaved);\n    }\n  }\n}","map":{"version":3,"names":["_Object$defineProperty","require","_interopRequireDefault","exports","value","default","unsavedChildren","_concat","_indexOf","_isArray","_forEach","_CoreManager","_ParseFile","_ParseRelation","obj","allowDeepUnsaved","encountered","objects","files","identifier","className","_getId","dirty","attributes","attr","traverse","unsaved","id","push","call","shouldThrow","ParseObject","getParseObject","Error","_context","url","el","k"],"sources":["/home/mavrik/Documents/classes/web-dev/feature05/node_modules/parse/lib/browser/unsavedChildren.js"],"sourcesContent":["\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = unsavedChildren;\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\nvar _indexOf = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/index-of\"));\nvar _isArray = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/array/is-array\"));\nvar _forEach = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"));\nvar _CoreManager = _interopRequireDefault(require(\"./CoreManager\"));\nvar _ParseFile = _interopRequireDefault(require(\"./ParseFile\"));\nvar _ParseRelation = _interopRequireDefault(require(\"./ParseRelation\"));\n/**\n * Return an array of unsaved children, which are either Parse Objects or Files.\n * If it encounters any dirty Objects without Ids, it will throw an exception.\n *\n * @param {Parse.Object} obj\n * @param {boolean} allowDeepUnsaved\n * @returns {Array}\n */\nfunction unsavedChildren(obj, allowDeepUnsaved) {\n  const encountered = {\n    objects: {},\n    files: []\n  };\n  const identifier = obj.className + ':' + obj._getId();\n  encountered.objects[identifier] = obj.dirty() ? obj : true;\n  const attributes = obj.attributes;\n  for (const attr in attributes) {\n    if (typeof attributes[attr] === 'object') {\n      traverse(attributes[attr], encountered, false, !!allowDeepUnsaved);\n    }\n  }\n  const unsaved = [];\n  for (const id in encountered.objects) {\n    if (id !== identifier && encountered.objects[id] !== true) {\n      unsaved.push(encountered.objects[id]);\n    }\n  }\n  return (0, _concat.default)(unsaved).call(unsaved, encountered.files);\n}\nfunction traverse(obj, encountered, shouldThrow, allowDeepUnsaved) {\n  const ParseObject = _CoreManager.default.getParseObject();\n  if (obj instanceof ParseObject) {\n    if (!obj.id && shouldThrow) {\n      throw new Error('Cannot create a pointer to an unsaved Object.');\n    }\n    const identifier = obj.className + ':' + obj._getId();\n    if (!encountered.objects[identifier]) {\n      encountered.objects[identifier] = obj.dirty() ? obj : true;\n      const attributes = obj.attributes;\n      for (const attr in attributes) {\n        if (typeof attributes[attr] === 'object') {\n          traverse(attributes[attr], encountered, !allowDeepUnsaved, allowDeepUnsaved);\n        }\n      }\n    }\n    return;\n  }\n  if (obj instanceof _ParseFile.default) {\n    var _context;\n    if (!obj.url() && (0, _indexOf.default)(_context = encountered.files).call(_context, obj) < 0) {\n      encountered.files.push(obj);\n    }\n    return;\n  }\n  if (obj instanceof _ParseRelation.default) {\n    return;\n  }\n  if ((0, _isArray.default)(obj)) {\n    (0, _forEach.default)(obj).call(obj, el => {\n      if (typeof el === 'object') {\n        traverse(el, encountered, shouldThrow, allowDeepUnsaved);\n      }\n    });\n  }\n  for (const k in obj) {\n    if (typeof obj[k] === 'object') {\n      traverse(obj[k], encountered, shouldThrow, allowDeepUnsaved);\n    }\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}